# Project Resonance: 技术概览

> 本文档提供项目的完整动机、设计哲学和关键概念解释。README 是入口，这里是深度。

---

## 核心假设

**H1 (波形推理可行性)**：神经网络可以在连续物理波形上直接执行逻辑推理，不需要离散 token 作为中间表示。

**H2 (跨域迁移)**：在一种物理波形上学到的推理能力可以迁移到其他物理波形。

---

## 为什么不用 Token？

传统管线：`波形 → ASR → token → LLM → token → TTS → 波形`

我们的管线：`波形 → Mini-JMamba → 波形`

**区别**：
- Token 是离散符号，量化必然丢失信息（相位、微时序、载波特性）
- 我们的模型在连续隐状态中推理，输出也是连续波形
- 符号**只用于**：(1) 生成训练监督信号 (2) 评测时解码验证

**澄清**："不用 token"指的是**推理载体**，不是"完全没有离散概念"。

---

## 任务阶梯设计

| 任务 | 符号定义 | 推理类型 | 复杂度 |
|------|----------|----------|--------|
| Task 1: Mirror | 符号序列 | 复制/重复 | ⭐ |
| Task 2: Bracket | `(`, `)` | 结构匹配 | ⭐⭐ |
| Task 3: Mod | `0-9`, `%` | 算术取模 | ⭐⭐⭐ |

**设计原则**：
- 每个任务都有明确的"正确答案"（可验证）
- 复杂度逐级提升
- 同一架构处理所有任务

---

## 物理域设计

| 域 | 编码方式 | 采样率 | 特点 |
|----|----------|--------|------|
| Audio | 频率调制 | 16 kHz | 人可听 |
| IPD (Optical) | 脉冲位置调制 | 1 kHz | 光通信风格 |
| RF | 幅度调制 | 1 MHz | 射频载波 |

**跨域迁移的意义**：如果模型在 Audio 上学会推理，能迁移到 IPD/RF，说明学到的是"结构"而非"载波特性"。

---

## 评测口径（重要）

### Oracle EM vs Model EM

| 指标 | 含义 | 脚本 | 用途 |
|------|------|------|------|
| Oracle EM | 编解码协议正确性 | `evaluate.py` | 验证系统无漏洞 |
| Model EM | 模型推理能力 | `evaluate_model.py` | 评估模型表现 |

### 关键约束

- **Model EM 评测禁用所有 guidance**：训练时可能使用 cls_guidance、remainder_guidance 等辅助信号，但评测时全部禁用
- **Task3 答案窗口**：已修复答案长度泄漏问题（见 `known_issues.md`）

---

## CWPR: Cross-Wave Physical Reasoning

这是我们提出的研究范式：

> 在任意物理波形上进行端到端逻辑推理，探索"推理能力"与"物理载体"的解耦。

**核心问题**：
1. 推理能力是否依赖于特定的符号表示？
2. 在连续域学到的结构能否迁移到其他连续域？
3. 什么样的归纳偏置适合"波形级推理"？

---

## 技术栈

- **骨干网络**：Mini-JMamba (12 层 SSM + Attention 混合)
- **位置编码**：RoPE (支持长度外推)
- **损失函数**：Multi-res STFT + L1 + CTC 辅助
- **评测**：FFT 频率解码 + Exact Match

---

## 相关文档

| 文档 | 内容 |
|------|------|
| [`iteration_log.md`](iteration_log.md) | 完整实验记录（可复现信息） |
| [`known_issues.md`](known_issues.md) | 已知问题与修复状态 |
| [`phase1/experiment_design.md`](phase1/experiment_design.md) | Phase 1 实验设计 |
| [`phase2-4/phase4_cross_domain_transfer.md`](phase2-4/phase4_cross_domain_transfer.md) | 跨域迁移设计 |

---

## 常见误解

### "这不就是换皮 token 吗？"

不是。Token 系统的推理发生在离散空间；我们的推理发生在连续隐状态轨迹中。符号只是生成监督信号的手段，不参与推理。

### "为什么要用 FFT 解码？"

FFT 只用于**评测**，验证模型输出的波形是否正确编码了目标符号。这是评测手段，不是推理手段。

### "CTC loss 不是离散监督吗？"

是的，CTC 是离散监督信号。但监督信号 ≠ 推理载体。我们用离散监督引导连续推理，就像用梯度引导权重更新，梯度不是权重。

---

> 最后更新：2026-01-01

